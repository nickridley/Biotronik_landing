<template>
	<div id="cross-wrapper">
		
		<div class="cross-container">
			<div class="flex justify-center cross-left" style="background-color: #F7AF8E; width: 40%;">
				<div class="cross-section2" id="cross-section2">
					<img src="../assets/img/cross/Lock_grip_2_new.png" id="verticalBiotronik" class="cross-left-dilator-body"/>
					<img src="../assets/img/cross/Dilator.png" class="cross-left-dilator"/>
				</div>
			</div>
			<div class="cross-right" style="width: 60%;">
				<div id="cross-right-1" class="cross-right-1 cross-right-item right-section">
					<div class="cross-dilator">
						<div style="display: table;">
							<p class="text-white cross-header font-din-medium">Support Catheter + Dilator</p>
						</div>
						<img src="../assets/img/cross/Lock grip 1.png" />
						<div class="flex justify-center items-center mt-20 ">
							<div>
								<p class="cross-content font-din-medium">Easy-to-use Lock Grip</p>
								<p class="cross-content">Seals and secures for accurate</p>
								<p class="cross-content">positioning of Oscar Dilator,</p>
								<p class="cross-content">Oscar PTA Ballon or guide wire.</p>
							</div>
						</div>
					</div>
				</div>
				<div id="cross-right-2" class="cross-right-2 cross-right-item right-section" style="padding-top: 75px;">
					<div class="flex items-center h-full">
						<div class="cross-support">
							<img src="../assets/img/cross/Braided support Cath X2.png" style="padding-left: 20px; height: 200px;" />
							<div class="flex justify-center items-center mt-20" style="padding-left: 30%;">
								<div>
									<p class="text-white font-din-medium" style="font-size: 50px; line-height: 50px;">Cross</p>
									<p class="text-white font-din-medium" style="font-size: 35px; line-height: 40px;">Braided Support Catheter</p>
									<p class="text-white font-din-medium" style="font-size: 35px; line-height: 40px;">and Extendable Dilator</p>
									<p class="text-white font-din-light" style="font-size: 35px;line-height: 40px;">Position 0:</p>
									<p class="text-white font-din-light" style="font-size: 35px;line-height: 40px;">Strongest support level</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="cross-right-3 cross-right-item right-section flex items-center">
					<div class="cross-support-2" style="height: 100%; position: relative;">
						<!-- <img src="../assets/img/cross/Braided support Cath X2.png" style="padding-left: 20px; height: 200px;" /> -->
						<video id="cross-video" src="../assets/video/cross-video-desktop.mp4" style="width;: 100%" muted="true"></video>
						<div class="flex justify-center items-center" style="padding-left: 30%;">
							<div>
								<p class="text-white font-din-medium" style="font-size: 50px; line-height: 50px;">Cross</p>
								<p class="text-white font-din-medium" style="font-size: 35px; line-height: 40px;">Braided Support Catheter</p>
								<p class="text-white font-din-medium" style="font-size: 35px; line-height: 40px;">and Extendable Dilator</p>
								<p class="text-white font-din-light" style="font-size: 35px;line-height: 40px;">Position Contrast:</p>
								<p class="text-white font-din-light" style="font-size: 35px;line-height: 40px;">Slightly extended dilator tip</p>
								<p class="text-white font-din-light" style="font-size: 35px;line-height: 40px;">allows local contrast injection</p>
							</div>
						</div>
					</div>
				</div>
				<div class="cross-right-4 right-section" style="position: relative; padding-top: 80px; min-height: 100vh; padding-bottom: 30px;">
					<div class="cross-curved" style="width: 100%;">
						<div class="flex justify-end items-center">
							<img src="../assets/img/cross/curved.jpg" style="width: 80%; max-width: 758px; max-height: 57vh;"/>
						</div>
						<div class="flex justify-start items-center" style="padding-left: 100px;">
							<div>
								<p class="font-orange font-bold text-[50px] font-din-medium" style="font-size: 40px; line-height: 45px;">Cross</p>
								<p class="font-grey font-din-medium" style="font-size: 35px; line-height: 38px;">Extended Dilator</p>
								<p class="font-grey cross-4-content font-din-light" >Position Max Flex:</p>
								<p class="font-grey cross-4-content font-din-light" >Most flexible support level</p>
								<p class="font-grey cross-4-content font-din-light" >with fully extended dilator</p>
							</div>
						</div>
						<div class="flex justify-end mt-6" style="padding-right: 40px;">
							<p style="font-size: 20px; color: #a2a2a2;">Â°Dilator extends from 0-191 mm.</p>
						</div>
					</div>
				</div>
				<div class="cross-right-5 cross-right-item right-section p-4 color-gray" style="padding-top: 100px;">
					<p class="font-orange font-din-medium" style="font-size: 36px; border-top: 2px solid #ED6C23; display: table;">Achieve the pushability of an 0.035"</p>
					<p class="font-orange font-din-medium" style="font-size: 36px;">system on an 0.018" platform*</p>
					<div style="margin-top: 70px;">
						<p class="font-din-medium" style="border-bottom: 2px solid grey;">Oscar Variale Pushability</p>
						<div class="grid grid-cols-3 gap-4 pr-4">
							<div class="col-span-1">
								<p class="mt-4" style="color: #ED6C23;">Oscar, 0.018" <br>BIOTRONIK</p>
								<p class="mt-3">Ouick-Cross, 0.018" <br>Philips</p>
								<p class="mt-3">Ouick-Cross-Extreme, 0.018" <br>Philips</p>
								<p class="mt-3">CXI, 0.018" <br>Cook Medical</p>
								<p class="mt-3">NaviCross, 0.035" <br>Teruno</p>
								<div class="color-gray" style="margin-top: 50px;">
									<div class="flex">
										<div style="width: 20px; height: 20px; background-color:#F04E23; margin-right: 10px;"></div>
										<p>Position 0</p>
									</div>
									<div class="flex">
										<div style="width: 20px; height: 20px; background-color:#F58B6E; margin-right: 10px;"></div>
										<p>180 mm</p>
									</div>
								</div>
							</div>
							<div class="col-span-2" style="padding-top: 30px;">
								<div id="crossLottie" class="lottie-wrapper" ref="crossChart" style="width: 100%; position: relative;">
									<img src="../assets/img/Scale.png" style="position: absolute; left: 0; right: 0; bottom: -100px;"/>
								</div>
							</div>
						</div>
						<p class="color-gray mt-3">*Testing performed with Oscar 0.018/6F Support Catheter + Dilator combination</p>
					</div>
				</div>

			</div>
		
		</div>
	</div>
</template>
  
<style scoped>
	.color-gray {
		color: #6E6E6E;
	}
	.cross-right-item {
		height: 100vh;	
	}
	.cross-4-content {
		font-size: 30px;
		line-height: 33px;
	}
	/* .cross-right {
		overflow-y: scroll;
		height: 100vh;
		scroll-snap-type: mandatory;
		scroll-snap-points-y: repeat(100vh);
		scroll-snap-type: y mandatory;
	} */
	.cross-left {
		position: relative;
	}
	.cross-section2 {
		position: absolute;
		top: 0;
		height: 140vh;
		z-index: 200;
		left: 0;
		right: 0;
	}
	.cross-left-dilator-body {
		height: 140vh;
		position: absolute;
		top: 0;
		left: 50%;
		z-index: 200;
		transform: translateX(-50%);
	}
	.cross-left-dilator {
		position: absolute;
		z-index: 100;
		bottom: -120px;
		height: 36vh;
		left: 50%;
		transform: translateX(-50%);
	}
	.cross-content {
		color: white;
		font-size: 35px;
		line-height: 40px;
	}
	
	.cross-header {
		border: solid 2px; 
		border-width: 2px 0 0 0; 
		padding-right: 100px; 
		font-size: 40px;
		margin-top: 100px;
		margin-left: 70px;
	}
	.cross-container {
		display: flex;
		align-items: stretch;
		position: relative;
	}

	.cross-dilator {
	}

	.cross-right-1 {
		background-color: #EF5923; 
	}
	.cross-right-2 {
		background-color: #F57853;
	}
	.cross-right-3 {
		background-color: #ef5823;
	}
	.cross-right-4 {
		background-color: white;
	}
	.cross-right-5 {
		background-color: white;
	}
	.cross-right-item {
		height: 100vh;
	}

	.cross-right, .cross-left {
	}

	.cross-support, .cross-support-2, .cross-curved {
		opacity: 0;
	}
	.cross-support {
		padding-bottom: 60px;
	}
</style>
  
<script>
  import gsap from 'gsap'
  import lottie from 'lottie-web'
  // var ScrollTrigger = null;
  if (process.client) {
    var {ScrollTrigger} = require('gsap/ScrollTrigger');
    var {ScrollToPlugin} = require('gsap/ScrollToPlugin')
    gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
  }
  export default {
    // components: { lottie },
  
    data() {
      return {
       
        loading: false,
        loaded: false,
		scrolling : {
			enabled: true,
			events: "scroll,wheel,touchmove,pointermove".split(","),
			prevent: e => e.preventDefault(),			
		}
      };
    },
	computed:{
		isNavClicked(){
			return this.$store.state.isNavClicked
		},
	},
    mounted() {
		let playhead = {frame: 0}
		const animation3 = lottie.loadAnimation({
                container: gsap.utils.toArray("#crossLottie")[0],
                renderer: "svg",
                loop: false,
                autoplay: false,
                path: 'https://assets9.lottiefiles.com/packages/lf20_rJzvFizMU4.json'
            });

		const sections = gsap.utils.toArray('.right-section')
		console.log('sections', sections)

		sections.forEach((section, i) => {
			// const intoAnim = gsap.from(section.querySelector(".right-col"), {yPercent: 50, duration: 1, paused: true});
			console.log('section', section)
			ScrollTrigger.create({
				trigger: section,
				start: "top bottom-=1",
				end: "bottom top+=1",
				onEnter: () => this.goToSection(section),
				onEnterBack: () => this.goToSection(section)
			});
		});

		let corssVideo = document.getElementById('cross-video')

		gsap.timeline({
			scrollTrigger: {
				trigger: '.cross-right-2',
				start: 'top bottom',
				end: 'top top',
				scrub: true,
			}
		})
		.to(".cross-section1", {opacity: 1, duration: 0.1}, "replace-dialtor")
		.to(".cross-section2", {opacity: 0, duration: 0.1}, "replace-dialtor")
		.add("dialtor-move-1")
		.to(".cross-section1", {top: '-100vh', duration: 3, onComplete: function(){
			setTimeout(() => {
				corssVideo.muted = true;
				corssVideo.play();
			}, 1000);
		} }, "dialtor-move-1")

		
		gsap.timeline({
			scrollTrigger: {
				trigger: '.cross-right-2',
				start: 'top center',
				end: 'top top',
				scrub: true,
			}
		})
		.add("dialtor-move-1")
		.to(".cross-support", {opacity: 1, duration: 3}, "dialtor-move-1")
		.to(".cross-dilator", {opacity: 0, duration: 3}, "dialtor-move-1")
	

		gsap.timeline({
			scrollTrigger: {
				trigger: '.cross-right-3',
				start: 'top bottom',
				end: 'top top',
				scrub: true,
			}
		})
		.add("dialtor-move-2")
		.to(".cross-left-dilator", {bottom: '-180px', duration: 3}, "dialtor-move-2")

		gsap.timeline({
			scrollTrigger: {
				trigger: '.cross-right-3',
				start: 'top center',
				end: 'top top',
				scrub: true,
			}
		})
		.add("dialtor-move-2")
		.to(".cross-support-2", {opacity: 1, duration: 3}, "dialtor-move-2")
			

		gsap.timeline({
			scrollTrigger: {
				trigger: '.cross-right-4',
				start: 'top bottom',
				end: 'top top',
				scrub: true,
			}
		})
		.add("dialtor-move-3")
		.to(".cross-left-dilator", {bottom: '-30vh', duration: 3}, "dialtor-move-3")

		gsap.timeline({
			scrollTrigger: {
				trigger: '.cross-right-4',
				start: 'top center',
				end: 'top top',
				scrub: true,
			}
		})
		.add("dialtor-move-3")
		.to(".cross-curved", {opacity: 1, duration: 3}, "dialtor-move-3")
		.to(".cross-left-dilator", {bottom: '-30vh', duration: 3}, "dialtor-move-3")

		gsap.timeline({
			scrollTrigger: {
				trigger: '.cross-right-5',
				start: 'top 10%',
				end: 'bottom top',
				scrub: true,
				onEnter: () => {
					animation3.play()
				}
			}
		})
		.to(".cross-section1", {top: '-200vh', duration: 1})
    },
    
    watch: {
  
    },
    methods: {
		goToSection(section, anim, i) {
			if (this.scrolling.enabled && !this.isNavClicked) { // skip if a scroll tween is in progress
				this.disable();
				gsap.to(window, {
					scrollTo: {y: section, autoKill: false},
					onComplete: this.enable,
					duration: 1
				});

				// anim && anim.restart();
			}
		},
		disable() {
			if (this.scrolling.enabled) {
				this.scrolling.enabled = false;
				window.addEventListener("scroll", gsap.ticker.tick, {passive: true});
				this.scrolling.events.forEach((e, i) => (i ? document : window).addEventListener(e, this.scrolling.prevent, {passive: false}));
			}
		},
		enable() {
			if (!this.scrolling.enabled) {
				this.scrolling.enabled = true;
				window.removeEventListener("scroll", gsap.ticker.tick);
				this.scrolling.events.forEach((e, i) => (i ? document : window).removeEventListener(e, this.scrolling.prevent));
			}
		}
    }
  
    
  };
  
  
  
</script>
  
  
  
  