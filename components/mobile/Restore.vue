<template>
	<div class="restore-wrapper" id="restore-wrapper">
		<div class="world-section">
			<h1>A Real-World User Evaluation </h1>
			<div class="grid grid-cols-1 gap-4 align-stretch">
				<div class="world-item world-left col-span-1">
					<h2 style="display: flex;">Real-World User Evaluation<p style="margin-top: 2px; font-size: 14px;">3</p></h2>
					<div class="world-content" style="padding-left: 0; padding-right: 0;">
						<div class="world-content-left flex align-center gap-1">
							<img class="world-left-image" src="../../assets/img/restore/Icon_1.png"/>
							<div>
								<p><span class="color-orange">Oscar</span> was evaluated in very complex lesions:</p>
								<ul>
									<li>80% CLI patients</li>
									<li>74% severe or moderate lesion calcification</li>
									<li>53% of lesions were occlusions</li>
									<li>Average lesion length of 151mm</li>
								</ul>
							</div>
						</div>
						<div class="world-content-left flex align-center gap-1">
							<img class="world-left-image" src="../../assets/img/restore/Icon_2.png"/>
							<div>
								<p><span class="color-orange">Oscar</span> use was evaluated:</p>
								<ul>
									<li>In 12 different hospitals across the US</li>
									<li>By 15 physicians; 7 interventional cardiologists, 5 interventional radiologists and 3 vascular surgeons</li>
								</ul>
							</div>
						</div>
						<div class="world-content-left flex align-center gap-1">
							<img class="world-left-image" src="../../assets/img/restore/Icon_3.png"/>
							<div>
								<p><span class="color-orange">Oscar</span> in numbers:</p>
								<ul>
									<li>Was used in 78 cases</li>
									<li>A total of 91 kits were used</li>
									<li>51 4F/0.014" and 40 6F/0.018" kits</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="world-item world-right col-span-1">
					<h2 style="display: flex; position: relative; margin-bottom: 15px;">Oscar User Evaluation<p style="position: absolute; bottom: 9px; left: 200px; font-size: 14px;">3</p></h2>
					<div id="world-charts" class="world-content" style="padding-left: 10%; padding-right: 10%;">
						<div class="grid gap-2 grid-cols-1">
							<div class="col-span-1 text-center">
								<div id="restore1" class="lottie-wrapper2 px-4" ref="restore1" style=""></div>
								<p style="font-size: 12px;">Crossing success</p>
							</div>
							<div class="col-span-1 text-center">
								<div id="restore2" class="lottie-wrapper2 px-4" ref="restore2" style=""></div>
								<p style="font-size: 12px;">PTA technical success</p>
							</div>
							<div class="col-span-1 text-center">
								<div id="restore3" class="lottie-wrapper2 px-4" ref="restore3" style=""></div>
								<p style="font-size: 12px;">Improved procedural<br>efficiency</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="achieve-section">
			<h1 style="font-size: 34px; line-height: 38px;">Achieve the pushability of an 0.035" system on an 0.018" platform</h1>
			<div class="grid grid-cols-3 gap-4 mb-12">
				<div id="archieve-1" class="col-span-3">
					<div class="achieve-title flex">
						<div><span class="color-orange" style="margin-right: 5px;">Oscar</span> pushability on the bench</div>
						<p style="margin-top: 0px; font-size: 16px;">4</p>
					</div>
					<div class="grid grid-cols-3 gap-3">
						<div class="col-span-3" style="padding-top: 30px;">
							<div id="restoreLottie6" class="lottie-wrapper" ref="restoreChart6" style="width: 100%; position: relative;">
								<img src="../../assets/img/Scale.png" style="position: absolute; left: 0; right: 0; bottom: -50px;"/>
							</div>
						</div>
						<div class="col-span-3 pt-6">
								<div class="color-gray" style="margin-top: 50px;">
									<div class="flex">
										<div style="width: 20px; height: 20px; background-color:#F04E23; margin-right: 10px;"></div>
										<p>Position 0</p>
									</div>
									<div class="flex">
										<div style="width: 20px; height: 20px; background-color:#F58B6E; margin-right: 10px;"></div>
										<p>180 mm</p>
									</div>
								</div>
						</div>
					</div>
				</div>
				<div  class="col-span-3" style="padding-left: 15%; padding-right: 15%;">
					<div id="restoreLottie7" class="lottie-wrapper" ref="restoreChart7" style="width: 100%;"></div>
					<p style="text-align: center;">more pushability vs<br>Terumo NaviCross 0.035"</p>
				</div>	
			</div>
			<div id="archieve-2" class="grid grid-cols-1 gap-4">
				<div class="col-span-1">
					<p class="achieve-title"><span class="color-orange">Oscar</span> user evaluation </p>
					<p>Physicians rated <span class="color-orange">Oscar</span> 0.018" Support Catheter and Dilator combination 91.7% much better/better or equal in crossing performance when compared to the Terumo NaviCross 0.035" crossing catheter</p>
				</div>
				<div class="col-span-1" style="padding-left: 15%; padding-right: 15%;">
					<div id="restoreLottie8" class="lottie-wrapper" ref="restoreChart8" style="width: 100%;"></div>
					<p style="text-align: center;">much better, better or equal<br>crossing performance vs<br>Terumo NaviCross 0.035"</p>
				</div>
			</div>
			

		</div>
		<div class="meet-section">
			<div class="meet-right">
				<div class="meet-header">
					<h1>Meet Oscar</h1>
					<p>
					The all-in-one solution to reach,<br/>
					cross and prepare lesions<sup style="font-size: 18px;">1</sup>
					</p>
				</div>
				<div class="meet-solution">
					<img src="../../assets/img/restore/solution.png" class="meet-solution-image"/>
					<div class="mask"></div>
					<button class="meet-button">Watch the video</button>
				</div>
				<div class="meet-footer">
					<button class="btn-brochure">View the brochure</button>
				</div>
			</div>
		</div>
	</div>
</template>
  
<style scoped>
	.restore-wrapper {
		background-color: white;
		padding-top: 30px;
	}
	.world-section {
		width: 90%;
		margin-left: 5%;
		margin-bottom: 20px;
		opacity: 0;
	}
	.world-section>h1 {
		font-size: 30px;
		color: #EF5923;
		margin-bottom: 20px;
	}
	.achieve-section>h1 {
		font-size: 30px;
		color: #EF5923;
		margin-bottom: 20px;
	}
	.world-item {
		background-color: white;
	}
	.world-item>h2 {
		color: #EF5923;
		font-size: 20px;
		margin-bottom: 20px;
	}
	.color-orange {
		color: #EF5923;
		font-weight: bold;
	}
	.world-content {
		padding: 20px;
	}
	.world-content-left {
		margin-bottom: 20px;
		font-size: 12px;
	}
	.world-left-image {
		width: 50px;
		height: 50px;
		margin-right: 14px;
	}
	.world-content-left ul {
		list-style: disc;
		margin-left: 20px;
	}
	.achieve-section {
		background-color: white;
		width: 90%;
		margin-left: 5%;
		opacity: 0.1;
		padding-top: 80px;
	}
	.achieve-title {
		font-size: 26px;
		font-weight: bold;
		color: #6E6E6E;
	}
	.color-gray {
		color: #6E6E6E;
	}

	.meet-section {
		position: relative;
		background: linear-gradient(to right, #EF5923, #ec6926, #EF5923);
		margin-top: 40px;
	}
	.meet-left {
		position: absolute;
		left: -200px;
		top: -10%;
	}
	.meet-right {
		color: white;
	}
	.meet-right h1 {
		font-size: 34px;
	}
	.meet-right> p {
		font-size: 28px;
		line-height: 28px;
	}
	.meet-solution {
		position: relative;
		margin: 20px;
	}

	.mask {
		opacity: 0.5;
		background-color: white;
		width: 100%;
		height: 100%;
		position: absolute;
		top: 0;
		z-index: 8;
	}

	.btn-brochure {
		background-color: white;
		padding: 10px 70px 10px 70px;
		border-radius: 25px;
		box-shadow: 1px 2px 3px 2px #1c1a1a31;
		color: #EF5923;
		font-size: 20px;
		font-weight: bold;
		position: relative;
		z-index: 30;
	}

	.meet-button {
		background-color: #F04E23;
		padding: 10px 34px 10px 34px;
		border-radius: 25px;
		box-shadow: 1px 2px 3px 2px #1c1a1a91;
		color: white;
		position: absolute;
		top: 50%;
		left: 50%;
		z-index: 10;
		transform: translate(-50%, -50%);
	}
	.meet-header {
		width: 100%;
		padding-left: 5%;
		padding-right: 5%;
		padding-top: 30px;
		padding-bottom: 20px;
	}
	.meet-header h1 {
		font-size: 38px;
	}
	.meet-header p {
		font-size: 26px;
	}
	.meet-footer {
		display: flex;
		justify-content: center;
		align-items: center;
		padding-top: 50px;
		padding-bottom: 80px;
	}
</style>
  
<script>
  import gsap from 'gsap'
  import lottie from 'lottie-web'
  // var ScrollTrigger = null;
  if (process.client) {
    var {ScrollTrigger} = require('gsap/ScrollTrigger');
    var {ScrollToPlugin} = require('gsap/ScrollToPlugin')
    gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
  }
  export default {
    // components: { lottie },
  
    data() {
      return {
      };
    },
    mounted() {			
			let playhead = {frame: 0}
			let playhead1 = {frame: 0}
			let playhead2 = {frame: 0}
			let playhead3 = {frame: 0}
			const selft = this;
			const {restore1, restore2, restore3, restoreChart6, restoreChart7, restoreChart8} = this.$refs;

			const animation1 = lottie.loadAnimation({
                container: gsap.utils.toArray("#restore1")[0],
                renderer: "svg",
                loop: false,
                autoplay: false,
                path: 'https://assets4.lottiefiles.com/packages/lf20_wciY22iqor.json'
            });

			const animation2 = lottie.loadAnimation({
                container: gsap.utils.toArray("#restore2")[0],
                renderer: "svg",
                loop: false,
                autoplay: false,
                path: 'https://assets2.lottiefiles.com/packages/lf20_dSaBZqLXsv.json'
            });
			
			const animation3 = lottie.loadAnimation({
                container: gsap.utils.toArray("#restore3")[0],
                renderer: "svg",
                loop: false,
                autoplay: false,
                path: 'https://assets8.lottiefiles.com/packages/lf20_XYswRcqon7.json'
            });

			const animation4 = lottie.loadAnimation({
                container: gsap.utils.toArray("#restoreLottie6")[0],
                renderer: "svg",
                loop: false,
                autoplay: false,
                path: 'https://assets4.lottiefiles.com/packages/lf20_cTHKljFNee.json'
            });

			const animation5 = lottie.loadAnimation({
                container: gsap.utils.toArray("#restoreLottie7")[0],
                renderer: "svg",
                loop: false,
                autoplay: false,
                path: 'https://assets3.lottiefiles.com/packages/lf20_xeSYcRENpQ.json'
            });

			const animation6 = lottie.loadAnimation({
                container: gsap.utils.toArray("#restoreLottie8")[0],
                renderer: "svg",
                loop: false,
                autoplay: false,
                path: 'https://assets6.lottiefiles.com/packages/lf20_Giw8Yw7Niq.json'
            });

			gsap.timeline({
				scrollTrigger: {
					trigger: '#world-charts',
					start: 'center center',
					end: '+=2000',
					scrub: true,
					pin: true
				}
			})
			.to(playhead, {
				frame: 58,
				duration: 3,
				onUpdate: (a,b,c) => {
					animation1.goToAndStop(playhead.frame, true)
					animation2.goToAndStop(playhead.frame, true)
					animation3.goToAndStop(playhead.frame, true)
				},
			})

			gsap.timeline({
				scrollTrigger: {
				trigger: '.world-section',
				start: 'top bottom',
				scrub: true,
				end: "top top",
				}
			})
			.to(".world-section", {opacity:1})

			gsap.timeline({
				scrollTrigger: {
					trigger: '.achieve-section',
					start: 'top top',
					end: '+=3000',
					scrub: true,
					pin: true
				}
			})
			.add('arhieve-move')
			.to(playhead2, {
				frame: 148,
				duration: 4,
				onUpdate: (a,b,c) => {
					animation4.goToAndStop(playhead2.frame, true)
				},
			}, 'arhieve-move')
			.to(playhead3, {
				frame: 58,
				duration: 4,
				onUpdate: (a,b,c) => {
					animation5.goToAndStop(playhead3.frame, true)
					animation6.goToAndStop(playhead3.frame, true)
				},
			}, 'arhieve-move')

			// gsap.timeline({
			// 	scrollTrigger: {
			// 		trigger: '#restoreLottie8',
			// 		start: 'center center',
			// 		scrub: true,
			// 	}
			// })
			// .to(playhead1, {
			// 	frame: 58,
			// 	ease: "power2.in",
			// 	onUpdate: (a,b,c) => {
			// 		animation6.goToAndStop(playhead1.frame, true)
			// 	},
			// })

			gsap.timeline({
				scrollTrigger: {
					trigger: '.achieve-section',
					start: 'top bottom',
					scrub: true,
					end: "center center",
				}
			})
			.to(".achieve-section", {opacity:1})

			gsap.timeline({
				scrollTrigger: {
					trigger: '.meet-section',
					start: 'top center',
					scrub: true,
					end: "top top",
				}
			})
			.to(".meet-left", {left:0})
		},

		methods: {
			goToSection (top) {
				let observer = ScrollTrigger.normalizeScroll(true);
				console.log('goTo', top);
				this.scrollTween = gsap.to(window, {
					scrollTo: {y: top, autoKill: false},
					ease: "strong.inOut",
					duration: 1,
					onStart: () => {
						observer.disable(); // for touch devices, as soon as we start forcing scroll it should stop any current touch-scrolling, so we just disable() and enable() the normalizeScroll observer
						observer.enable();
					},
					onComplete: () => this.scrollTween = null,
					overwrite: true
				});
			},
			getTopPosition (el, idx) {
				// return (idx - 1) * window.innerHeight;
				// if (el.parentElement.classList.contains('pin-spacer')) return el.parentElement.getBoundingClientRect().top + window.scrollY;
				return el.getBoundingClientRect().top + window.scrollY;
			},
    	}
  };
  
  
  
</script>
  
  
  
  